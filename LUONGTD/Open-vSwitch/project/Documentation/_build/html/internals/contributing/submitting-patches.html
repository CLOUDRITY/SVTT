
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Submitting Patches &#8212; Open vSwitch 2.9.2 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Backporting patches" href="backporting-patches.html" />
    <link rel="prev" title="Contributing to Open vSwitch" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="submitting-patches">
<h1>Submitting Patches<a class="headerlink" href="#submitting-patches" title="Permalink to this headline">¶</a></h1>
<p>Send changes to Open vSwitch as patches to <a class="reference external" href="mailto:dev&#37;&#52;&#48;openvswitch&#46;org">dev<span>&#64;</span>openvswitch<span>&#46;</span>org</a>.  One patch per
email.  More details are included below.</p>
<p>If you are using Git, then <cite>git format-patch</cite> takes care of most of the
mechanics described below for you.</p>
<div class="section" id="before-you-start">
<h2>Before You Start<a class="headerlink" href="#before-you-start" title="Permalink to this headline">¶</a></h2>
<p>Before you send patches at all, make sure that each patch makes sense.  In
particular:</p>
<ul class="simple">
<li>A given patch should not break anything, even if later patches fix the
problems that it causes.  The source tree should still build and work after
each patch is applied.  (This enables <cite>git bisect</cite> to work best.)</li>
<li>A patch should make one logical change.  Don’t make multiple, logically
unconnected changes to disparate subsystems in a single patch.</li>
<li>A patch that adds or removes user-visible features should also
update the appropriate user documentation or manpages.  Consider
adding an item to NEWS for nontrivial changes.  Check “Feature
Deprecation Guidelines” section in this document if you intend to
remove user-visible feature.</li>
</ul>
<p>Testing is also important:</p>
<ul class="simple">
<li>Test a patch that modifies existing code with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check</span></code> before
submission.  Refer to the “Unit Tests” in <a class="reference internal" href="../../topics/testing.html"><span class="doc">Testing</span></a>, for more
information.  We also encourage running the kernel and userspace system
tests.</li>
<li>Consider testing a patch that adds or deletes files with <code class="docutils literal notranslate"><span class="pre">make</span>
<span class="pre">distcheck</span></code> before submission.</li>
<li>A patch that modifies Linux kernel code should be at least build-tested on
various Linux kernel versions before submission.  I suggest versions 3.10 and
whatever the current latest release version is at the time.</li>
<li>A patch that adds a new feature should add appropriate tests for the
feature.  A bug fix patch should preferably add a test that would
fail if the bug recurs.</li>
</ul>
<p>If you are using GitHub, then you may utilize the travis-ci.org CI build system
by linking your GitHub repository to it. This will run some of the above tests
automatically when you push changes to your repository.  See the “Continuous
Integration with Travis-CI” in <a class="reference internal" href="../../topics/testing.html"><span class="doc">Testing</span></a> for details on how to set
it up.</p>
</div>
<div class="section" id="email-subject">
<h2>Email Subject<a class="headerlink" href="#email-subject" title="Permalink to this headline">¶</a></h2>
<p>The subject line of your email should be in the following format:</p>
<blockquote>
<div>[PATCH &lt;n&gt;/&lt;m&gt;] &lt;area&gt;: &lt;summary&gt;</div></blockquote>
<p>Where:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">[PATCH</span> <span class="pre">&lt;n&gt;/&lt;m&gt;]</span></code>:</dt>
<dd>indicates that this is the nth of a series of m patches.  It helps reviewers
to read patches in the correct order.  You may omit this prefix if you are
sending only one patch.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;area&gt;</span></code>:</dt>
<dd>indicates the area of the Open vSwitch to which the change applies (often the
name of a source file or a directory).  You may omit it if the change crosses
multiple distinct pieces of code.</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">&lt;summary&gt;</span></code>:</p>
<blockquote>
<div>briefly describes the change.  Use the the imperative form,
e.g. “Force SNAT for multiple gateway routers.” or “Fix daemon exit
for bad datapaths or flows.”  Try to keep the summary short, about
50 characters wide.</div></blockquote>
<p>The subject, minus the <code class="docutils literal notranslate"><span class="pre">[PATCH</span> <span class="pre">&lt;n&gt;/&lt;m&gt;]</span></code> prefix, becomes the first line of
the commit’s change log message.</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The body of the email should start with a more thorough description of the
change.  This becomes the body of the commit message, following the subject.
There is no need to duplicate the summary given in the subject.</p>
<p>Please limit lines in the description to 75 characters in width.  That
allows the description to format properly even when indented (e.g. by
“git log” or in email quotations).</p>
<p>The description should include:</p>
<ul class="simple">
<li>The rationale for the change.</li>
<li>Design description and rationale (but this might be better added as code
comments).</li>
<li>Testing that you performed (or testing that should be done but you could not
for whatever reason).</li>
<li>Tags (see below).</li>
</ul>
<p>There is no need to describe what the patch actually changed, if the reader can
see it for himself.</p>
<p>If the patch refers to a commit already in the Open vSwitch repository, please
include both the commit number and the subject of the patch, e.g. ‘commit
632d136c (vswitch: Remove restriction on datapath names.)’.</p>
<p>If you, the person sending the patch, did not write the patch yourself, then
the very first line of the body should take the form <code class="docutils literal notranslate"><span class="pre">From:</span> <span class="pre">&lt;author</span> <span class="pre">name&gt;</span>
<span class="pre">&lt;author</span> <span class="pre">email&gt;</span></code>, followed by a blank line.  This will automatically cause the
named author to be credited with authorship in the repository.</p>
</div>
<div class="section" id="tags">
<h2>Tags<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h2>
<p>The description ends with a series of tags, written one to a line as the last
paragraph of the email.  Each tag indicates some property of the patch in an
easily machine-parseable manner.</p>
<p>Examples of common tags follow.</p>
<p><code class="docutils literal notranslate"><span class="pre">Signed-off-by:</span> <span class="pre">Author</span> <span class="pre">Name</span> <span class="pre">&lt;author.name&#64;email.address...&gt;</span></code></p>
<blockquote>
<div><p>Informally, this indicates that Author Name is the author or submitter of a
patch and has the authority to submit it under the terms of the license.  The
formal meaning is to agree to the Developer’s Certificate of Origin (see
below).</p>
<p>If the author and submitter are different, each must sign off.  If the patch
has more than one author, all must sign off.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Signed</span><span class="o">-</span><span class="n">off</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">Author</span> <span class="n">Name</span> <span class="o">&lt;</span><span class="n">author</span><span class="o">.</span><span class="n">name</span><span class="nd">@email</span><span class="o">.</span><span class="n">address</span><span class="o">...&gt;</span>
<span class="n">Signed</span><span class="o">-</span><span class="n">off</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">Submitter</span> <span class="n">Name</span> <span class="o">&lt;</span><span class="n">submitter</span><span class="o">.</span><span class="n">name</span><span class="nd">@email</span><span class="o">.</span><span class="n">address</span><span class="o">...&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Co-authored-by:</span> <span class="pre">Author</span> <span class="pre">Name</span> <span class="pre">&lt;author.name&#64;email.address...&gt;</span></code></p>
<blockquote>
<div>Git can only record a single person as the author of a given patch.  In the
rare event that a patch has multiple authors, one must be given the credit in
Git and the others must be credited via Co-authored-by: tags.  (All
co-authors must also sign off.)</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Acked-by:</span> <span class="pre">Reviewer</span> <span class="pre">Name</span> <span class="pre">&lt;reviewer.name&#64;email.address...&gt;</span></code></p>
<blockquote>
<div><p>Reviewers will often give an <code class="docutils literal notranslate"><span class="pre">Acked-by:</span></code> tag to code of which they approve.
It is polite for the submitter to add the tag before posting the next version
of the patch or applying the patch to the repository.  Quality reviewing is
hard work, so this gives a small amount of credit to the reviewer.</p>
<p>Not all reviewers give <code class="docutils literal notranslate"><span class="pre">Acked-by:</span></code> tags when they provide positive reviews.
It’s customary only to add tags from reviewers who actually provide them
explicitly.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Tested-by:</span> <span class="pre">Tester</span> <span class="pre">Name</span> <span class="pre">&lt;reviewer.name&#64;email.address...&gt;</span></code></p>
<blockquote>
<div>When someone tests a patch, it is customary to add a Tested-by: tag
indicating that.  It’s rare for a tester to actually provide the tag; usually
the patch submitter makes the tag himself in response to an email indicating
successful testing results.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Tested-at:</span> <span class="pre">&lt;URL&gt;</span></code></p>
<blockquote>
<div><p>When a test report is publicly available, this provides a way to reference
it.  Typical &lt;URL&gt;s would be build logs from autobuilders or references to
mailing list archives.</p>
<p>Some autobuilders only retain their logs for a limited amount of time.  It is
less useful to cite these because they may be dead links for a developer
reading the commit message months or years later.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Reported-by:</span> <span class="pre">Reporter</span> <span class="pre">Name</span> <span class="pre">&lt;reporter.name&#64;email.address...&gt;</span></code></p>
<blockquote>
<div><p>When a patch fixes a bug reported by some person, please credit the reporter
in the commit log in this fashion.  Please also add the reporter’s name and
email address to the list of people who provided helpful bug reports in the
AUTHORS file at the top of the source tree.</p>
<p>Fairly often, the reporter of a bug also tests the fix.  Occasionally one
sees a combined “Reported-and-tested-by:” tag used to indicate this.  It is
also acceptable, and more common, to include both tags separately.</p>
<p>(If a bug report is received privately, it might not always be appropriate to
publicly credit the reporter.  If in doubt, please ask the reporter.)</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Requested-by:</span> <span class="pre">Requester</span> <span class="pre">Name</span> <span class="pre">&lt;requester.name&#64;email.address...&gt;</span></code></p>
<blockquote>
<div><p>When a patch implements a request or a suggestion made by some
person, please credit that person in the commit log in this
fashion.  For a helpful suggestion, please also add the
person’s name and email address to the list of people who
provided suggestions in the AUTHORS file at the top of the
source tree.</p>
<p>(If a suggestion or a request is received privately, it might
not always be appropriate to publicly give credit.  If in
doubt, please ask.)</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Suggested-by:</span> <span class="pre">Suggester</span> <span class="pre">Name</span> <span class="pre">&lt;suggester.name&#64;email.address...&gt;</span></code></p>
<blockquote>
<div>See <code class="docutils literal notranslate"><span class="pre">Requested-by:</span></code>.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">CC:</span> <span class="pre">Person</span> <span class="pre">&lt;name&#64;email&gt;</span></code></p>
<blockquote>
<div>This is a way to tag a patch for the attention of a person
when no more specific tag is appropriate.  One use is to
request a review from a particular person.  It doesn’t make
sense to include the same person in CC and another tag, so
e.g. if someone who is CCed later provides an Acked-by, add
the Acked-by and remove the CC at the same time.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Reported-at:</span> <span class="pre">&lt;URL&gt;</span></code></p>
<blockquote>
<div><p>If a patch fixes or is otherwise related to a bug reported in
a public bug tracker, please include a reference to the bug in
the form of a URL to the specific bug, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Reported</span><span class="o">-</span><span class="n">at</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bugs</span><span class="o">.</span><span class="n">debian</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mi">743635</span>
</pre></div>
</div>
<p>This is also an appropriate way to refer to bug report emails
in public email archives, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Reported</span><span class="o">-</span><span class="n">at</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">mail</span><span class="o">.</span><span class="n">openvswitch</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">pipermail</span><span class="o">/</span><span class="n">ovs</span><span class="o">-</span><span class="n">dev</span><span class="o">/</span><span class="mi">2014</span><span class="o">-</span><span class="n">June</span><span class="o">/</span><span class="mf">284495.</span><span class="n">html</span>
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Submitted-at:</span> <span class="pre">&lt;URL&gt;</span></code></p>
<blockquote>
<div><p>If a patch was submitted somewhere other than the Open vSwitch
development mailing list, such as a GitHub pull request, this header can
be used to reference the source.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Submitted</span><span class="o">-</span><span class="n">at</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openvswitch</span><span class="o">/</span><span class="n">ovs</span><span class="o">/</span><span class="n">pull</span><span class="o">/</span><span class="mi">92</span>
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">VMware-BZ:</span> <span class="pre">#1234567</span></code></p>
<blockquote>
<div>If a patch fixes or is otherwise related to a bug reported in
a private bug tracker, you may include some tracking ID for
the bug for your own reference.  Please include some
identifier to make the origin clear, e.g. “VMware-BZ” refers
to VMware’s internal Bugzilla instance and “ONF-JIRA” refers
to the Open Networking Foundation’s JIRA bug tracker.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">ONF-JIRA:</span> <span class="pre">EXT-12345</span></code></p>
<blockquote>
<div>See <code class="docutils literal notranslate"><span class="pre">VMware-BZ:</span></code>.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Bug</span> <span class="pre">#1234567.</span></code></p>
<blockquote>
<div>These are obsolete forms of VMware-BZ: that can still be seen
in old change log entries.  (They are obsolete because they do
not tell the reader what bug tracker is referred to.)</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Issue:</span> <span class="pre">1234567</span></code></p>
<blockquote>
<div>See <code class="docutils literal notranslate"><span class="pre">Bug:</span></code>.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Fixes:</span> <span class="pre">63bc9fb1c69f</span> <span class="pre">(“packets:</span> <span class="pre">Reorder</span> <span class="pre">CS_*</span> <span class="pre">flags</span> <span class="pre">to</span> <span class="pre">remove</span> <span class="pre">gap.”)</span></code></p>
<blockquote>
<div><p>If you would like to record which commit introduced a bug being fixed,
you may do that with a “Fixes” header.  This assists in determining
which OVS releases have the bug, so the patch can be applied to all
affected versions.  The easiest way to generate the header in the
proper format is with this git command.  This command also CCs the
author of the commit being fixed, which makes sense unless the
author also made the fix or is already named in another tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git log -1 --pretty=format:&quot;CC: %an &lt;%ae&gt;%nFixes: %h (\&quot;%s\&quot;)&quot; \
  --abbrev=12 COMMIT_REF
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Vulnerability:</span> <span class="pre">CVE-2016-2074</span></code></p>
<blockquote>
<div><p>Specifies that the patch fixes or is otherwise related to a
security vulnerability with the given CVE identifier.  Other
identifiers in public vulnerability databases are also
suitable.</p>
<p>If the vulnerability was reported publicly, then it is also
appropriate to cite the URL to the report in a Reported-at
tag.  Use a Reported-by tag to acknowledge the reporters.</p>
</div></blockquote>
</div>
<div class="section" id="developer-s-certificate-of-origin">
<h2>Developer’s Certificate of Origin<a class="headerlink" href="#developer-s-certificate-of-origin" title="Permalink to this headline">¶</a></h2>
<p>To help track the author of a patch as well as the submission chain, and be
clear that the developer has authority to submit a patch for inclusion in
openvswitch please sign off your work.  The sign off certifies the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Developer</span><span class="s1">&#39;s Certificate of Origin 1.1</span>

<span class="n">By</span> <span class="n">making</span> <span class="n">a</span> <span class="n">contribution</span> <span class="n">to</span> <span class="n">this</span> <span class="n">project</span><span class="p">,</span> <span class="n">I</span> <span class="n">certify</span> <span class="n">that</span><span class="p">:</span>

<span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="n">was</span> <span class="n">created</span> <span class="ow">in</span> <span class="n">whole</span> <span class="ow">or</span> <span class="ow">in</span> <span class="n">part</span> <span class="n">by</span> <span class="n">me</span> <span class="ow">and</span> <span class="n">I</span>
    <span class="n">have</span> <span class="n">the</span> <span class="n">right</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">it</span> <span class="n">under</span> <span class="n">the</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span>
    <span class="n">indicated</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">file</span><span class="p">;</span> <span class="ow">or</span>

<span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="ow">is</span> <span class="n">based</span> <span class="n">upon</span> <span class="n">previous</span> <span class="n">work</span> <span class="n">that</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">best</span>
    <span class="n">of</span> <span class="n">my</span> <span class="n">knowledge</span><span class="p">,</span> <span class="ow">is</span> <span class="n">covered</span> <span class="n">under</span> <span class="n">an</span> <span class="n">appropriate</span> <span class="nb">open</span> <span class="n">source</span>
    <span class="n">license</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">have</span> <span class="n">the</span> <span class="n">right</span> <span class="n">under</span> <span class="n">that</span> <span class="n">license</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">that</span>
    <span class="n">work</span> <span class="k">with</span> <span class="n">modifications</span><span class="p">,</span> <span class="n">whether</span> <span class="n">created</span> <span class="ow">in</span> <span class="n">whole</span> <span class="ow">or</span> <span class="ow">in</span> <span class="n">part</span>
    <span class="n">by</span> <span class="n">me</span><span class="p">,</span> <span class="n">under</span> <span class="n">the</span> <span class="n">same</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span> <span class="p">(</span><span class="n">unless</span> <span class="n">I</span> <span class="n">am</span>
    <span class="n">permitted</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">under</span> <span class="n">a</span> <span class="n">different</span> <span class="n">license</span><span class="p">),</span> <span class="k">as</span> <span class="n">indicated</span>
    <span class="ow">in</span> <span class="n">the</span> <span class="n">file</span><span class="p">;</span> <span class="ow">or</span>

<span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="n">was</span> <span class="n">provided</span> <span class="n">directly</span> <span class="n">to</span> <span class="n">me</span> <span class="n">by</span> <span class="n">some</span> <span class="n">other</span>
    <span class="n">person</span> <span class="n">who</span> <span class="n">certified</span> <span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">have</span> <span class="ow">not</span> <span class="n">modified</span>
    <span class="n">it</span><span class="o">.</span>

<span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="n">I</span> <span class="n">understand</span> <span class="ow">and</span> <span class="n">agree</span> <span class="n">that</span> <span class="n">this</span> <span class="n">project</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">contribution</span>
    <span class="n">are</span> <span class="n">public</span> <span class="ow">and</span> <span class="n">that</span> <span class="n">a</span> <span class="n">record</span> <span class="n">of</span> <span class="n">the</span> <span class="n">contribution</span> <span class="p">(</span><span class="n">including</span> <span class="nb">all</span>
    <span class="n">personal</span> <span class="n">information</span> <span class="n">I</span> <span class="n">submit</span> <span class="k">with</span> <span class="n">it</span><span class="p">,</span> <span class="n">including</span> <span class="n">my</span> <span class="n">sign</span><span class="o">-</span><span class="n">off</span><span class="p">)</span> <span class="ow">is</span>
    <span class="n">maintained</span> <span class="n">indefinitely</span> <span class="ow">and</span> <span class="n">may</span> <span class="n">be</span> <span class="n">redistributed</span> <span class="n">consistent</span> <span class="k">with</span>
    <span class="n">this</span> <span class="n">project</span> <span class="ow">or</span> <span class="n">the</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">involved</span><span class="o">.</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="http://developercertificate.org/">http://developercertificate.org/</a>.</p>
</div>
<div class="section" id="feature-deprecation-guidelines">
<h2>Feature Deprecation Guidelines<a class="headerlink" href="#feature-deprecation-guidelines" title="Permalink to this headline">¶</a></h2>
<p>Open vSwitch is intended to be user friendly.  This means that under normal
circumstances we don’t abruptly remove features from OVS that some users might
still be using.  Otherwise, if we would, then we would possibly break our user
setup when they upgrade and would receive bug reports.</p>
<p>Typical process to deprecate a feature in Open vSwitch is to:</p>
<ol class="loweralpha simple">
<li>Mention deprecation of a feature in the NEWS file.  Also, mention expected
release or absolute time when this feature would be removed from OVS
altogether.  Don’t use relative time (e.g. “in 6 months”) because that is
not clearly interpretable.</li>
<li>If Open vSwitch is configured to use deprecated feature it should print
a warning message to the log files clearly indicating that feature is
deprecated and that use of it should be avoided.</li>
<li>If this feature is mentioned in man pages, then add “Deprecated” keyword
to it.</li>
</ol>
<p>Also, if there is alternative feature to the one that is about to be marked as
deprecated, then mention it in (a), (b) and (c) as well.</p>
<p>Remember to follow-up and actually remove the feature from OVS codebase once
deprecation grace period has expired and users had opportunity to use at least
one OVS release that would have informed them about feature deprecation!</p>
</div>
<div class="section" id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<p>If you want to include any comments in your email that should not be part of
the commit’s change log message, put them after the description, separated by a
line that contains just <code class="docutils literal notranslate"><span class="pre">---</span></code>.  It may be helpful to include a diffstat here
for changes that touch multiple files.</p>
</div>
<div class="section" id="patch">
<h2>Patch<a class="headerlink" href="#patch" title="Permalink to this headline">¶</a></h2>
<p>The patch should be in the body of the email following the description,
separated by a blank line.</p>
<p>Patches should be in <code class="docutils literal notranslate"><span class="pre">diff</span> <span class="pre">-up</span></code> format.  We recommend that you use Git to
produce your patches, in which case you should use the <code class="docutils literal notranslate"><span class="pre">-M</span> <span class="pre">-C</span></code> options to
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> (or other Git tools) if your patch renames or copies files.
<a class="reference external" href="http://savannah.nongnu.org/projects/quilt">Quilt</a> might be useful if you do
not want to use Git.</p>
<p>Patches should be inline in the email message.  Some email clients corrupt
white space or wrap lines in patches.  There are hints on how to configure many
email clients to avoid this problem on <a class="reference external" href="https://static.lwn.net/kerneldoc/process/email-clients.html">kernel.org</a>.  If you
cannot convince your email client not to mangle patches, then sending the patch
as an attachment is a second choice.</p>
<p>Follow the style used in the code that you are modifying. <a class="reference internal" href="coding-style.html"><span class="doc">Open vSwitch Coding Style</span></a>
file describes the coding style used in most of Open vSwitch. Use Linux kernel
coding style for Linux kernel code.</p>
<p>If your code is non-datapath code, you may use the <code class="docutils literal notranslate"><span class="pre">utilities/checkpatch.py</span></code>
utility as a quick check for certain commonly occuring mistakes (improper
leading/trailing whitespace, missing signoffs, some improper formatted patch
files).  For linux datapath code, it is a good idea to use the linux script
<code class="docutils literal notranslate"><span class="pre">checkpatch.pl</span></code>.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">From</span> <span class="n">fa29a1c2c17682879e79a21bb0cdd5bbe67fa7c0</span> <span class="n">Mon</span> <span class="n">Sep</span> <span class="mi">17</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="mi">2001</span>
<span class="n">From</span><span class="p">:</span> <span class="n">Jesse</span> <span class="n">Gross</span> <span class="o">&lt;</span><span class="n">jesse</span><span class="nd">@nicira</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
<span class="n">Date</span><span class="p">:</span> <span class="n">Thu</span><span class="p">,</span> <span class="mi">8</span> <span class="n">Dec</span> <span class="mi">2011</span> <span class="mi">13</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">24</span> <span class="o">-</span><span class="mi">0800</span>
<span class="n">Subject</span><span class="p">:</span> <span class="p">[</span><span class="n">PATCH</span><span class="p">]</span> <span class="n">datapath</span><span class="p">:</span> <span class="n">Alphabetize</span> <span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">ipv6</span><span class="o">.</span><span class="n">h</span> <span class="n">compat</span> <span class="n">header</span><span class="o">.</span>

<span class="n">Signed</span><span class="o">-</span><span class="n">off</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">Jesse</span> <span class="n">Gross</span> <span class="o">&lt;</span><span class="n">jesse</span><span class="nd">@nicira</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
<span class="o">---</span>
 <span class="n">datapath</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">Modules</span><span class="o">.</span><span class="n">mk</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">+-</span>
 <span class="mi">1</span> <span class="n">files</span> <span class="n">changed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span> <span class="mi">1</span> <span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>

<span class="n">diff</span> <span class="o">--</span><span class="n">git</span> <span class="n">a</span><span class="o">/</span><span class="n">datapath</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">Modules</span><span class="o">.</span><span class="n">mk</span> <span class="n">b</span><span class="o">/</span><span class="n">datapath</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">Modules</span><span class="o">.</span><span class="n">mk</span>
<span class="n">index</span> <span class="n">fdd952e</span><span class="o">..</span><span class="n">f6cb88e</span> <span class="mi">100644</span>
<span class="o">---</span> <span class="n">a</span><span class="o">/</span><span class="n">datapath</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">Modules</span><span class="o">.</span><span class="n">mk</span>
<span class="o">+++</span> <span class="n">b</span><span class="o">/</span><span class="n">datapath</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">Modules</span><span class="o">.</span><span class="n">mk</span>
<span class="o">@@</span> <span class="o">-</span><span class="mi">56</span><span class="p">,</span><span class="mi">11</span> <span class="o">+</span><span class="mi">56</span><span class="p">,</span><span class="mi">11</span> <span class="o">@@</span> <span class="n">openvswitch_headers</span> <span class="o">+=</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">dst</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">genetlink</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">ip</span><span class="o">.</span><span class="n">h</span> \
<span class="o">+</span>   <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">ipv6</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">net_namespace</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">netlink</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">protocol</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">route</span><span class="o">.</span><span class="n">h</span> \
<span class="o">-</span>   <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">ipv6</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">linux</span><span class="o">/</span><span class="n">compat</span><span class="o">/</span><span class="n">genetlink</span><span class="o">.</span><span class="n">inc</span>

 <span class="n">both_modules</span> <span class="o">+=</span> <span class="n">brcompat</span>
<span class="o">--</span>
<span class="mf">1.7</span><span class="o">.</span><span class="mf">7.3</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../contents.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Submitting Patches</a><ul>
<li><a class="reference internal" href="#before-you-start">Before You Start</a></li>
<li><a class="reference internal" href="#email-subject">Email Subject</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#tags">Tags</a></li>
<li><a class="reference internal" href="#developer-s-certificate-of-origin">Developer’s Certificate of Origin</a></li>
<li><a class="reference internal" href="#feature-deprecation-guidelines">Feature Deprecation Guidelines</a></li>
<li><a class="reference internal" href="#comments">Comments</a></li>
<li><a class="reference internal" href="#patch">Patch</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../contents.html">Documentation overview</a><ul>
  <li><a href="../index.html">Open vSwitch Internals</a><ul>
  <li><a href="index.html">Contributing to Open vSwitch</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Contributing to Open vSwitch</a></li>
      <li>Next: <a href="backporting-patches.html" title="next chapter">Backporting patches</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/internals/contributing/submitting-patches.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, The Open vSwitch Development Community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/internals/contributing/submitting-patches.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>